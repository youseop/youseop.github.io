---
layout: post
title: BAEKJOON#10830 í–‰ë ¬ì œê³±-ë¹„íŠ¸ì—°ì‚°ì
subtitle: Python
cover-img: /assets/img/posting/mountain.jpg
thumbnail-img: /assets/img/posting/baekjoonrect.png
share-img: /assets/img/posting/mountain.jpg
tags: [í–‰ë ¬, ë¹„íŠ¸ì—°ì‚°ì, BAEKJOON]
comments: true
---

## [í–‰ë ¬ì œê³±-ë¹„íŠ¸ì—°ì‚°ì](https://www.acmicpc.net/problem/10830)

### ë¬¸ì œ ë¶„ì„

9ì›” 26ì¼ í•œë‹¬ ì „ì— í‘¼ í–‰ë ¬ ì œê³± ë¬¸ì œë‹¤.
DPë¥¼ í™œìš©í•´ í’€ì—ˆì—ˆëŠ”ë°, ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í•˜ë‹¤ê°€ ë¹„íŠ¸ì—°ì‚°ìë¥¼ í™œìš©í•œ ë°©ë²•ë„ ë°œê²¬í•´ì„œ í•¨ê»˜ í¬ìŠ¤íŒ… í–ˆì—ˆë‹¤.

ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” ì´ ë¬¸ì œë¥¼ ë¹„íŠ¸ ì—°ì‚°ìë¥¼ í™œìš©í•´ ì ‘ê·¼í•˜ê³ , ë‹¤ì‹œ í•œë²ˆ ë‚´ê°€ ì§ì ‘ í’€ì–´ë³´ëŠ” ì‹œê°„ì„ ê°€ì¡Œë‹¤.

ì‚¬ì‹¤ ì¬ê·€í•¨ìˆ˜&DPë¥¼ ì‚¬ìš©í•´ í‘¼ ë°©ë²•ê³¼ ë¹„íŠ¸ì—°ì‚°ìë¥¼ í™œìš©í•œ ë°©ë²•ì€ ê·¼ë³¸ì ìœ¼ë¡œëŠ” ë¹„ìŠ·í•˜ë‹¤.

- ë¹„íŠ¸ì—°ì‚°ì

ì´ë²ˆì— ì‚¬ìš©í•œ ë¹„íŠ¸ì—°ì‚°ìë¥¼ í™œìš©í•œ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì.
ë¨¼ì €, ì…ë ¥ìœ¼ë¡œ ë°›ì€ ê³±ì…ˆíšŸìˆ˜ bë¥¼ 2ì§„ìˆ˜ë¡œ ë³€í™˜í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ì„œ 14ë¼ëŠ” ìˆ˜ê°€ ì£¼ì–´ì§€ë©´, '1110'ìœ¼ë¡œ ë°”ë€ŒëŠ” ê²ƒì´ë‹¤.
ì´ì œ, ê° ìë¦¬ìˆ˜ê°€ 0ì¸ì§€ 1ì¸ì§€ íŒŒì•…í•´ì£¼ë©´ ëœë‹¤. 14ì˜ ê²½ìš°ì—ëŠ” '1110'ì„ìœ¼ë¡œ
í–‰ë ¬^8 X í–‰ë ¬^4 X í–‰ë ¬^2 ê°€ ë˜ëŠ” ê²ƒì´ë‹¤.

```python
for i in range(len(bin(b))-1):
    if (1<<i)&b:
        answer=mul(answer,matrix)

    matrix=mul(matrix,matrix)
```

matrixëŠ” iê°€ 1ì”© ì»¤ì§ì— ë”°ë¼ ì œê³±ì‹œì¼œì£¼ê³ , ìœ„ì™€ ê°™ì´ '1<<i' ì™€ bë¥¼ ë¹„êµí•´ bì˜ í•´ë‹¹ ìë¦¬ ìˆ«ìê°€ 1ì´ë¼ë©´ answerì— matrixë¥¼ ê³±í•´ì¤€ë‹¤.

- DP

ì¬ê·€&DPë¥¼ í™œìš©í•œ ë°©ë²•ì—ì„œëŠ” ì•„ë˜(ì½”ë“œì˜ ì¼ë¶€ë¶„ì„ ê°€ì ¸ì™”ë‹¤.)ì™€ ê°™ì´ multipleí•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, më²ˆ ì—°ì‚°í•œ ê°’ì´ ì €ì¥ë˜ì–´ ìˆì§€ ì•Šì„ ë•Œ, mì„ 2ë¶„í•´ì„œ ë‹¤ì‹œ ì¬ê·€í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

```python
def multiple(n,m):
    # í–‰ë ¬ì„ më²ˆ ì—°ì‚°í•œ ê°’ì´ ì´ë¯¸ ì €ì¥ë˜ì–´ìˆìœ¼ë©´ ë°”ë¡œ return
    if m in save:
        return save[m]
    else:
        #ì €ì¥ë˜ì–´ìˆì§€ ì•Šì„ ê²½ìš° ë” ì‘ì€ ê°’ì— ëŒ€í•´ ì¬ê·€ í˜¸ì¶œì„ í•œë‹¤.
        lista=multiple(n,m//2)
        listb=multiple(n,m-m//2)
```

<br>

### CODE - ë¹„íŠ¸ì—°ì‚°ì ì‚¬ìš©

```python
import sys
read = sys.stdin.readline

n, b = map(int, read().split())
matrix = list(list(map(int, read().split())) for _ in range(n))
# í–‰ë ¬ ê³±ì…ˆ í•¨ìˆ˜

def mul(a, b):
    new = list(list(0 for _ in range(n)) for _ in range(n))
    for i in range(n):
        for j in range(n):
            for k in range(n):
                new[i][j] += a[i][k]*b[k][j]
            new[i][j] %= 1000
    return new

# I í–‰ë ¬ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¸íŒ…
answer = list(list(0 for _ in range(n)) for _ in range(n))
for i in range(n):
    answer[i][i] = 1
# í¬ë¬¸ì„ í•œë²ˆ ëŒ ë•Œë§ˆë‹¤ matrixëŠ” ì œê³±ì´ ë˜ê³ ,
# ì´ì§„ìˆ˜ë¡œ ë°”ê¿¨ì„ ë•Œ, 1ì´ ìˆëŠ” ì§€ì ë§ˆë‹¤ matrixë¥¼ answerì— ê³±í•´ì¤€ë‹¤.
for i in range(len(bin(b))-1):
    tmp = 1 << i
    if tmp & b:
        answer = mul(answer, matrix)

    matrix = mul(matrix, matrix)

for a in answer:
    print(*a)
```

<br>

### CODE - ì¬ê·€í•¨ìˆ˜ ì‚¬ìš© [Link](https://youseop.github.io/2020-09-26-BAEKJOON-10830-%ED%96%89%EB%A0%AC-%EC%A0%9C%EA%B3%B1-copy/)

```python
import sys
n,m=map(int,sys.stdin.readline().split())
matrix=[list(map(int,sys.stdin.readline().split())) for _ in range(n)]

for i in range(n):
    for j in range(n):
        matrix[i][j]= matrix[i][j]%1000

#í–‰ë ¬ì„ n ë²ˆ ê³±í•œ ê°’ì„ save[n]ì— ì €ì¥
save=dict()
save[1]=matrix

def multiple(n,m):
    # í–‰ë ¬ì„ më²ˆ ì—°ì‚°í•œ ê°’ì´ ì´ë¯¸ ì €ì¥ë˜ì–´ìˆìœ¼ë©´ ë°”ë¡œ return
    if m in save:
        return save[m]
    else:
        #ì €ì¥ë˜ì–´ìˆì§€ ì•Šì„ ê²½ìš° ë” ì‘ì€ ê°’ì— ëŒ€í•´ ì¬ê·€ í˜¸ì¶œì„ í•œë‹¤.
        lista=multiple(n,m//2)
        listb=multiple(n,m-m//2)
        matrix=list([0 for _ in range(n)] for _ in range(n))

        for i in range(n):
            for j in range(n):
                matrix[i][j]=0
                for x in range(n):
                    matrix[i][j]+=lista[i][x]*listb[x][j]
                matrix[i][j]%=1000

        save[m]=matrix
        return save[m]
#ì¶œë ¥
for x in multiple(n,m):
    for i in x:
        print(i,end=' ')
    print()
```

<br>

í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”¼ë“œë°± ì£¼ì‹œë©´ ê³ ì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!
ê°ì‚¬í•©ë‹ˆë‹¤.ğŸ‘

[ê¼­ ë‹¤ì‹œ í’€ì–´ë³´ê¸°]
<br>
<br>
